# Story 1.3: Worker Mock Data Module Structure

**Epic:** Epic 1 - Project Setup & Infrastructure
**Status:** Ready for Review
**Priority:** P0 - Critical Path
**Complexity:** Medium
**Owner:** Dev Team

---

## User Story

As a developer, I need to create structured TypeScript modules for supplier catalog data and usage scenarios so that the recommendation pipeline has realistic mock data to work with during development and demonstration.

---

## Acceptance Criteria

### Directory Structure
- [ ] Create directory `src/worker/data/` if not already present
- [ ] Verify directory permissions allow read/write operations
- [ ] Confirm directory structure matches project layout from Story 1.1

### TypeScript Interfaces & Types
- [ ] Create `src/worker/data/types.ts` with complete TypeScript interfaces:
  - [ ] `SupplierPlan` interface with fields:
    - [ ] `id: string` (unique plan identifier)
    - [ ] `supplier: string` (supplier company name)
    - [ ] `planName: string` (descriptive plan name)
    - [ ] `baseRate: number` ($/kWh)
    - [ ] `monthlyFee: number` ($/month)
    - [ ] `contractTermMonths: number` (3, 6, 12, or 24)
    - [ ] `earlyTerminationFee: number` ($/month, 0 for no penalty)
    - [ ] `renewablePercent: number` (0-100, percentage of renewable energy)
    - [ ] `ratings: { reliabilityScore: number, customerServiceScore: number }` (1-5 scale)
    - [ ] `features: string[]` (array of plan features)
    - [ ] `availableInStates: string[]` (list of state abbreviations)
  - [ ] `UsageData` interface with fields:
    - [ ] `month: number` (1-12)
    - [ ] `kWh: number` (kilowatt-hours consumed)
    - [ ] `dayOfWeek?: string` (optional peak usage day)
  - [ ] `UsageScenario` interface with fields:
    - [ ] `id: string` (scenario identifier)
    - [ ] `name: string` (human-readable name)
    - [ ] `description: string` (usage pattern description)
    - [ ] `type: "residential" | "small-business" | "seasonal-high" | "seasonal-low"` (usage type)
    - [ ] `monthlyUsage: UsageData[]` (array of 12 monthly data points)
    - [ ] `annualKWh: number` (total annual consumption)
    - [ ] `averageMonthlyKWh: number` (calculated average)
  - [ ] `CurrentPlan` interface with fields:
    - [ ] `supplier: string`
    - [ ] `planName: string`
    - [ ] `currentRate: number` ($/kWh)
    - [ ] `monthlyFee: number` ($/month)
    - [ ] `contractEndDate?: string` (ISO format)
    - [ ] `monthsRemaining: number`
    - [ ] `earlyTerminationFee: number`
  - [ ] `UserPreferences` interface with fields:
    - [ ] `prioritizeSavings: boolean`
    - [ ] `prioritizeRenewable: boolean`
    - [ ] `prioritizeFlexibility: boolean`
    - [ ] `maxContractMonths: number`
    - [ ] `riskTolerance: "low" | "medium" | "high"`
- [ ] Export all types for use in other modules
- [ ] Verify no TypeScript compilation errors

### Supplier Catalog Module
- [ ] Create `src/worker/data/supplier-catalog.ts` with:
  - [ ] Import all required types from `types.ts`
  - [ ] Define array `supplierCatalog: SupplierPlan[]` with minimum 10 realistic supplier plans
  - [ ] Include supplier plans from at least 4-5 different suppliers (e.g., "Green Energy Co", "Power Plus", "EcoFlow", "Standard Electric", "Premium Power")
  - [ ] Ensure diverse plan characteristics:
    - [ ] At least 3 plans with high renewable percentage (>70%)
    - [ ] At least 2 plans with low renewable percentage (<30%)
    - [ ] At least 3 different contract terms (6, 12, 24 months)
    - [ ] Mix of low, medium, and high base rates
    - [ ] Some plans with $0 early termination fee, others with varying penalties
  - [ ] **Sample Plan Data (minimum requirements):**
    - [ ] Plan 1: "Eco Max" - Green supplier, 90% renewable, 12-month contract, $0.12/kWh, $15/month fee
    - [ ] Plan 2: "Budget Friendly" - Low-cost supplier, 10% renewable, 24-month contract, $0.089/kWh, $5/month fee, $50 ETF
    - [ ] Plan 3: "Balanced Green" - Mid-tier supplier, 55% renewable, 6-month contract, $0.105/kWh, $10/month fee
    - [ ] Plan 4: "Premium Stability" - Premium supplier, 100% renewable, 12-month contract, $0.135/kWh, $25/month fee
    - [ ] Plan 5: "Solar Strong" - Solar-focused supplier, 85% renewable, 12-month contract, $0.115/kWh, $12/month fee
    - [ ] Plan 6: "Economy Plus" - Budget supplier, 20% renewable, 12-month contract, $0.095/kWh, $0/month fee, $30 ETF
    - [ ] Plan 7: "Flex Saver" - Flexible supplier, 40% renewable, 3-month contract, $0.102/kWh, $8/month fee, $0 ETF
    - [ ] Plan 8: "Peak Performance" - Tech-forward supplier, 60% renewable, 12-month contract, $0.108/kWh, $18/month fee
    - [ ] Plan 9: "Community Green" - Local utility, 50% renewable, 24-month contract, $0.098/kWh, $12/month fee
    - [ ] Plan 10: "Ultimate Value" - Discount supplier, 15% renewable, 24-month contract, $0.085/kWh, $3/month fee, $75 ETF
  - [ ] Each plan includes realistic supplier name, plan name, and 4-5 features (e.g., "24/7 Customer Support", "Online Bill Pay", "Mobile App", "Green Incentives")
  - [ ] Ratings reflect supplier reputation (1-5 scale):
    - [ ] Reliability scores: 3.5-4.8
    - [ ] Customer service scores: 3.2-4.9
  - [ ] Export `supplierCatalog` as default export and named export
  - [ ] Verify no TypeScript compilation errors
  - [ ] Confirm data is immutable (use `as const` or `Object.freeze()` to prevent accidental mutations)

### Usage Scenarios Module
- [ ] Create `src/worker/data/usage-scenarios.ts` with:
  - [ ] Import all required types from `types.ts`
  - [ ] Define array `usageScenarios: UsageScenario[]` with minimum 5 realistic usage profiles
  - [ ] **Sample Scenarios (must include):**
    - [ ] **Scenario 1: "Average Household"** (type: residential)
      - [ ] Annual usage: ~10,800 kWh (average US household)
      - [ ] Monthly range: 800-1,000 kWh (slightly higher summer)
      - [ ] 12-month profile with realistic variation
      - [ ] Description: "Typical suburban home with electric heating and cooling"
    - [ ] **Scenario 2: "High Summer Usage"** (type: seasonal-high)
      - [ ] Annual usage: ~14,400 kWh (40% above average due to AC)
      - [ ] Monthly range: 1,200-1,600 kWh (peaks May-September)
      - [ ] 12-month profile reflecting seasonal pattern
      - [ ] Description: "Hot climate home with heavy summer air conditioning"
    - [ ] **Scenario 3: "Low Usage (Efficient)"** (type: residential)
      - [ ] Annual usage: ~6,000 kWh (30% below average)
      - [ ] Monthly range: 400-600 kWh (consistent throughout year)
      - [ ] 12-month profile with minimal variation
      - [ ] Description: "Energy-efficient apartment with minimal heating/cooling needs"
    - [ ] **Scenario 4: "Small Business"** (type: small-business)
      - [ ] Annual usage: ~25,000 kWh (retail/office space)
      - [ ] Monthly range: 1,800-2,200 kWh (higher daytime usage)
      - [ ] 12-month profile with business-like patterns
      - [ ] Description: "Small retail shop with extended business hours"
    - [ ] **Scenario 5: "Winter-Heavy Usage"** (type: seasonal-low)
      - [ ] Annual usage: ~13,200 kWh (heating-driven)
      - [ ] Monthly range: 1,100-1,500 kWh (peaks November-February)
      - [ ] 12-month profile reflecting cold climate
      - [ ] Description: "Northern climate home with electric heating"
  - [ ] Each scenario has realistic 12-month breakdown:
    - [ ] All 12 months represented
    - [ ] Monthly kWh values reflect usage type
    - [ ] Data is numerically realistic (no extreme outliers)
    - [ ] Calculations verified: `annualKWh` = sum of all monthly values
    - [ ] `averageMonthlyKWh` = annualKWh / 12
  - [ ] Export `usageScenarios` as default export and named export
  - [ ] Verify no TypeScript compilation errors
  - [ ] Confirm data is immutable (use `as const` or `Object.freeze()`)

### Data Validation Module
- [ ] Create `src/worker/data/validation.ts` with validation functions:
  - [ ] `validateSupplierPlan(plan: any): plan is SupplierPlan` - type guard function
  - [ ] `validateUsageScenario(scenario: any): scenario is UsageScenario` - type guard function
  - [ ] `validateCurrentPlan(plan: any): plan is CurrentPlan` - type guard function
  - [ ] `validateSupplierCatalog(catalog: unknown): void` - function that throws on invalid data
    - [ ] Checks that catalog is array
    - [ ] Validates each plan has required fields
    - [ ] Validates numeric ranges (rates > 0, renewable 0-100, ratings 1-5)
    - [ ] Throws descriptive error if validation fails
  - [ ] `validateUsageScenarios(scenarios: unknown): void` - function that throws on invalid data
    - [ ] Checks that scenarios is array
    - [ ] Validates each scenario has 12 month entries
    - [ ] Validates kWh values are positive numbers
    - [ ] Verifies annualKWh calculation matches sum
    - [ ] Throws descriptive error if validation fails
  - [ ] Export all validation functions
  - [ ] Include JSDoc comments explaining each validator
  - [ ] Verify no TypeScript compilation errors

### Optional Zod Validation Schema
- [ ] (Optional) Create `src/worker/data/schemas.ts` with Zod validation:
  - [ ] Install `zod` if validation is desired: `npm install zod`
  - [ ] Define Zod schemas matching TypeScript interfaces:
    - [ ] `SupplierPlanSchema` - validates all SupplierPlan fields
    - [ ] `UsageDataSchema` - validates usage data points
    - [ ] `UsageScenarioSchema` - validates complete usage scenario
    - [ ] `CurrentPlanSchema` - validates current plan data
  - [ ] Schemas enforce strict field types and ranges
  - [ ] Provide helpful error messages on validation failure
  - [ ] Export all schemas for runtime validation
  - [ ] Note: Zod is optional; the basic validation module is sufficient for MVP

### Data Export Index
- [ ] Create `src/worker/data/index.ts` barrel export file:
  - [ ] Export all types from `types.ts`
  - [ ] Export `supplierCatalog` from `supplier-catalog.ts`
  - [ ] Export `usageScenarios` from `usage-scenarios.ts`
  - [ ] Export validation functions from `validation.ts`
  - [ ] Export Zod schemas if created (optional)
  - [ ] Enable single-point imports: `import { supplierCatalog, usageScenarios } from '@/worker/data'`

### Integration with Worker Entry Point
- [ ] Update `src/worker/index.ts`:
  - [ ] Import `supplierCatalog` and `usageScenarios` from data module
  - [ ] Create placeholder endpoint `/api/mock-data` (GET) that returns:
    - [ ] `{ suppliers: supplierCatalog, scenarios: usageScenarios, count: { suppliers: X, scenarios: Y } }`
    - [ ] HTTP 200 with `Content-Type: application/json`
  - [ ] Verify no TypeScript compilation errors
  - [ ] Confirm Worker can be started without errors

### Build & Compilation Verification
- [ ] Run `npx tsc -p tsconfig.worker.json` to verify TypeScript compilation
  - [ ] Zero TypeScript errors in worker config
  - [ ] All type imports resolve correctly
  - [ ] Strict mode passes
- [ ] Run `npm run build` to verify Vite bundling
  - [ ] Build completes successfully
  - [ ] No warnings related to data modules
  - [ ] Dist/ directory updated
  - [ ] Bundle includes data modules
- [ ] Build completes in <15 seconds

### Data Structure Verification
- [ ] Verify `supplierCatalog` contains exactly 10 plans (minimum requirement)
  - [ ] Each plan has all required fields
  - [ ] Field values are realistic and properly typed
  - [ ] No duplicate plan IDs
  - [ ] Base rates range from $0.08-$0.15 per kWh
  - [ ] Monthly fees range from $0-$25
  - [ ] Renewable percentages are 0-100
  - [ ] Contract terms are 3, 6, 12, or 24 months
  - [ ] Ratings are between 1-5
- [ ] Verify `usageScenarios` contains exactly 5 scenarios (minimum requirement)
  - [ ] Each scenario has all required fields
  - [ ] Monthly usage data has exactly 12 entries
  - [ ] Annual kWh calculation matches sum of monthly values
  - [ ] Average monthly calculation is correct (annual / 12)
  - [ ] Usage types are valid (residential, small-business, seasonal-high, seasonal-low)
  - [ ] Annual kWh ranges: 6,000-25,000 (realistic spectrum)
  - [ ] Monthly values are positive and realistic

### Data Immutability
- [ ] Supplier catalog is marked as immutable:
  - [ ] Use `as const` for all plan data, OR
  - [ ] Wrap export with `Object.freeze()`, OR
  - [ ] Use `readonly` array type to prevent mutations
- [ ] Usage scenarios are marked as immutable:
  - [ ] Use `as const` for all scenario data, OR
  - [ ] Wrap export with `Object.freeze()`, OR
  - [ ] Use `readonly` array type to prevent mutations
- [ ] Verify mutation attempts fail at development time (TypeScript error)

### Unit Testing / Manual Verification
- [ ] Create test file `src/worker/data/supplier-catalog.test.ts` OR verify manually:
  - [ ] Verify each plan can be imported in TypeScript
  - [ ] Confirm types match SupplierPlan interface
  - [ ] Check 10+ plans present
  - [ ] Validate plan IDs are unique
  - [ ] Ensure numeric fields are valid
- [ ] Create test file `src/worker/data/usage-scenarios.test.ts` OR verify manually:
  - [ ] Verify each scenario can be imported in TypeScript
  - [ ] Confirm types match UsageScenario interface
  - [ ] Check 5+ scenarios present
  - [ ] Validate 12 months per scenario
  - [ ] Verify annual/monthly calculations
- [ ] Manual verification approach (acceptable for MVP):
  - [ ] Load data in Node REPL or browser console
  - [ ] Inspect data structure visually
  - [ ] Verify calculations with calculator
  - [ ] Document spot checks in comment

### Export & Import Patterns
- [ ] Verify imports work correctly:
  - [ ] `import { supplierCatalog } from '@/worker/data'`
  - [ ] `import { usageScenarios } from '@/worker/data'`
  - [ ] `import type { SupplierPlan, UsageScenario } from '@/worker/data'`
  - [ ] `import { validateSupplierCatalog } from '@/worker/data/validation'`
- [ ] All imports resolve without TypeScript errors
- [ ] Default and named exports both work

### Documentation
- [ ] Create `src/worker/data/README.md` with:
  - [ ] Overview of data module structure
  - [ ] Description of supplier catalog (10 plans, attributes, diversity)
  - [ ] Description of usage scenarios (5 profiles, annual ranges)
  - [ ] How to add new supplier plans
  - [ ] How to add new usage scenarios
  - [ ] Instructions for using validation functions
  - [ ] Example imports and usage code
  - [ ] Note about data mutability (immutable to prevent accidental changes)
- [ ] Update `README.md` with reference to mock data module
- [ ] Update `CHANGELOG.md` or git commit with description

### Git & Cleanup
- [ ] No uncommitted changes except new data module files
- [ ] Verify git status is clean after staging new files
- [ ] Prepare commit message:
  - [ ] Reference Epic 1 and Story 1.3
  - [ ] Mention supplier catalog and usage scenarios created
  - [ ] List validation functions added
  - [ ] Note immutable data structure
- [ ] Ready for git commit (do not commit during this story, prepare for next step)

---

## Technical Details

### Files Created/Modified

**New Files:**
- `src/worker/data/types.ts` – TypeScript interfaces for all data structures
- `src/worker/data/supplier-catalog.ts` – 10+ realistic supplier plans with complete attributes
- `src/worker/data/usage-scenarios.ts` – 5 usage profile scenarios with 12-month breakdowns
- `src/worker/data/validation.ts` – Type guards and validation functions
- `src/worker/data/schemas.ts` – (Optional) Zod validation schemas
- `src/worker/data/index.ts` – Barrel export file for clean imports
- `src/worker/data/README.md` – Documentation of data module structure
- `src/worker/data/supplier-catalog.test.ts` – (Optional) Unit tests or manual verification checklist

**Modified Files:**
- `src/worker/index.ts` – Add `/api/mock-data` endpoint
- `README.md` – Add section referencing mock data module
- `CHANGELOG.md` – Document creation of data module

### Data Attributes Reference (from PRD)

**Supplier Plan Attributes:**
- Base electricity rate ($/kWh) - varies by market, typically $0.08-$0.15
- Monthly service fee - 0-$25
- Contract term - 3, 6, 12, or 24 months
- Early termination fee - $0-$100
- Renewable energy percentage - 0-100%
- Customer ratings - reliability and service quality (1-5 scale)
- Plan features - customer support, billing options, mobile app, etc.
- Availability - varies by state (TX, CA, NY, etc.)

**Usage Data Attributes:**
- 12 months of consumption data (kWh per month)
- Realistic variation reflecting household patterns:
  - Summer peaks (AC usage in warm regions)
  - Winter peaks (heating usage in cold regions)
  - Stable year-round (mild climates, efficient homes)
  - Business patterns (peak daytime usage)
- Annual total consumption range: 6,000-25,000 kWh (realistic spectrum)

### Implementation Pattern

```typescript
// src/worker/data/types.ts - Example interface structure
export interface SupplierPlan {
  id: string;
  supplier: string;
  planName: string;
  baseRate: number; // $/kWh
  monthlyFee: number;
  contractTermMonths: number;
  earlyTerminationFee: number;
  renewablePercent: number; // 0-100
  ratings: {
    reliabilityScore: number; // 1-5
    customerServiceScore: number; // 1-5
  };
  features: string[];
  availableInStates: string[];
}

// src/worker/data/supplier-catalog.ts - Example data structure
export const supplierCatalog = [
  {
    id: "plan-eco-001",
    supplier: "Green Energy Co",
    planName: "Eco Max",
    baseRate: 0.12,
    monthlyFee: 15,
    contractTermMonths: 12,
    earlyTerminationFee: 0,
    renewablePercent: 90,
    ratings: { reliabilityScore: 4.5, customerServiceScore: 4.3 },
    features: ["24/7 Support", "Green Incentives", "Online Portal"],
    availableInStates: ["TX", "CA", "NY"]
  },
  // ... 9+ more plans
] as const;

// src/worker/data/usage-scenarios.ts - Example scenario
export const usageScenarios = [
  {
    id: "scenario-avg",
    name: "Average Household",
    description: "Typical suburban home with electric heating and cooling",
    type: "residential" as const,
    monthlyUsage: [
      { month: 1, kWh: 920 },
      { month: 2, kWh: 850 },
      // ... 10 more months
    ],
    annualKWh: 10800,
    averageMonthlyKWh: 900
  },
  // ... 4+ more scenarios
] as const;
```

### Tech Spec References

- § "Source Tree Changes" → `src/worker/data/supplier-catalog.ts` and `src/worker/data/usage-scenarios.ts`
- § "Technical Approach" → Manage mock datasets as TypeScript modules with typed exports
- § "Implementation Details" → Static JSON files (we're using TypeScript modules instead)
- § "Integration Points" → Static mock datasets loaded at runtime for intake autofill and plan scoring
- § "Data Requirements" from PRD § 6: Accept current plan details, supplier catalog, 12 months usage data

---

## Testing Approach

### Manual Data Verification
- **Browser Console:** Import data, inspect structure, verify calculations
  - [ ] Open browser DevTools → Console
  - [ ] Verify `supplierCatalog.length === 10+`
  - [ ] Spot-check 3 plans: verify all fields present and valid
  - [ ] Verify `usageScenarios.length === 5+`
  - [ ] Spot-check 2 scenarios: verify month count (12) and annual calculation
- **TypeScript Compilation:** Run `npx tsc` to verify no type errors
- **Vite Build:** Run `npm run build` to ensure bundle includes data
- **Worker Dev:** Start `npm run dev` and visit `/api/mock-data` endpoint

### Validation Testing
- **Call validation functions** with valid data:
  - [ ] `validateSupplierCatalog(supplierCatalog)` completes without error
  - [ ] `validateUsageScenarios(usageScenarios)` completes without error
- **Call validation functions** with invalid data:
  - [ ] `validateSupplierCatalog({})` throws appropriate error
  - [ ] `validateUsageScenarios([])` throws appropriate error

### Integration Testing
- **Mock Data Endpoint:** GET `/api/mock-data`
  - [ ] Returns HTTP 200
  - [ ] Returns valid JSON with `{ suppliers, scenarios, count }`
  - [ ] `count.suppliers === 10+`
  - [ ] `count.scenarios === 5+`
  - [ ] No TypeScript errors in response

---

## Blockers / Dependencies

- Story 1.1 must be completed (project scaffold foundation)
- TypeScript strict mode must be enabled (configured in Story 1.1)
- Worker entry point (`src/worker/index.ts`) must exist
- (Optional) Zod library: `npm install zod` if Zod validation is desired

---

## Definition of Done

- All 6+ data module TypeScript files created with no compilation errors
- `supplierCatalog` contains 10+ realistic supplier plans with all required attributes
- `usageScenarios` contains 5+ usage profile scenarios with 12-month breakdowns
- Supplier plans include diversity: multiple suppliers, contract terms, renewable options, price ranges
- Usage scenarios include diversity: residential, business, seasonal patterns, efficiency levels
- All data is immutable (use `as const` or `Object.freeze()`)
- TypeScript strict mode passes for all data modules
- Validation functions created and tested with valid/invalid data
- `/api/mock-data` endpoint returns mock data in JSON format
- `npm run build` succeeds and includes data modules in bundle
- Documentation created in `src/worker/data/README.md`
- All imports and exports verified to work correctly
- Git status clean and ready for commit

---

## Handoff Notes for Developer

This story establishes the mock data foundation for the recommendation pipeline. Once complete:

1. **Next story (1.4):** Implements Worker entry point with API routes (uses this data)
2. **Story 1.5 & beyond:** AI pipeline uses this data for recommendations

**Key files to reference:**
- `src/worker/data/types.ts` – Type definitions (reference for other modules)
- `src/worker/data/supplier-catalog.ts` – Supplier data (import to use)
- `src/worker/data/usage-scenarios.ts` – Usage profiles (import to use)
- `src/worker/data/validation.ts` – Validation functions (import to validate)
- `src/worker/data/README.md` – How to extend with new data

**Adding more supplier plans later:**
```typescript
// In supplier-catalog.ts, just add more objects to the array
const moreSuppliers = [
  {
    id: "plan-new-001",
    supplier: "New Supplier",
    // ... complete fields
  },
];
```

**Adding more usage scenarios later:**
```typescript
// In usage-scenarios.ts, just add more objects to the array
const moreScenarios = [
  {
    id: "scenario-new",
    name: "New Usage Pattern",
    // ... complete fields with 12 months
  },
];
```

All data modules are type-safe with TypeScript strict mode. The validation layer ensures data integrity at runtime.

---

## Dev Agent Record

### Implementation Checklist

- [x] Create `src/worker/data/types.ts` with all TypeScript interfaces
- [x] Create `src/worker/data/supplier-catalog.ts` with 10+ supplier plans
- [x] Create `src/worker/data/usage-scenarios.ts` with 5+ usage scenarios
- [x] Create `src/worker/data/validation.ts` with validation functions
- [ ] (Optional) Create `src/worker/data/schemas.ts` with Zod schemas
- [x] Create `src/worker/data/index.ts` barrel export
- [x] Create `src/worker/data/README.md` documentation
- [x] Update `src/worker/index.ts` with `/api/mock-data` endpoint
- [x] Verify TypeScript compilation passes
- [x] Verify `npm run build` succeeds
- [x] Verify data structure and calculations
- [x] Test imports and exports
- [x] Prepare git commit

### Debug Log References

No issues encountered during implementation. TypeScript compilation and build completed successfully on first attempt after minor type annotation fix.

### Completion Notes

- Successfully created complete mock data module with all required components
- All TypeScript interfaces defined with comprehensive JSDoc comments
- 12 supplier plans created (exceeds minimum requirement of 10)
- 5 usage scenarios created with accurate 12-month breakdowns
- All data marked as immutable using `as const`
- Validation layer implemented with type guards and catalog validators
- Comprehensive README.md documentation created with usage examples
- `/api/mock-data` endpoint added to worker for testing
- TypeScript compilation passes with zero errors
- Production build succeeds (vite build completed in 593ms)
- All data calculations verified (annual kWh matches sum of monthly values)

### File List

**Created:**
- `src/worker/data/types.ts` - TypeScript interfaces (5 interfaces: SupplierPlan, UsageData, UsageScenario, CurrentPlan, UserPreferences)
- `src/worker/data/supplier-catalog.ts` - 12 realistic supplier plans with diverse attributes
- `src/worker/data/usage-scenarios.ts` - 5 usage scenarios (10,800-26,000 kWh annual range)
- `src/worker/data/validation.ts` - Type guards and validation functions
- `src/worker/data/index.ts` - Barrel export for clean imports
- `src/worker/data/README.md` - Comprehensive documentation

**Modified:**
- `src/worker/index.ts` - Added `/api/mock-data` GET endpoint

### Change Log

2025-11-10:
- Created complete data module structure per Story 1.3 requirements
- Implemented 12 supplier plans from 12 different suppliers
- Base rates range: $0.085-$0.135/kWh
- Renewable percentages: 10%-100%
- Contract terms: 3, 6, 12, 24 months
- Implemented 5 usage scenarios covering residential, business, and seasonal patterns
- Annual usage range: 6,000-26,000 kWh
- All monthly calculations verified for accuracy
- Added comprehensive validation layer with descriptive error messages
- Data immutability enforced via TypeScript `as const`
- Added worker endpoint for testing data access
- Zero TypeScript compilation errors
- Production build successful

### Dev Notes

**Supplier Plans Created:** 12 plans
- High Renewable (>70%): 4 plans (Eco Max 90%, Premium Stability 100%, Solar Strong 85%, Wind Powered Pro 95%)
- Budget-Friendly (<$0.10/kWh): 3 plans (Ultimate Value $0.085, Budget Friendly $0.089, Economy Plus $0.095)
- Flexible Contracts (≤6 months): 2 plans (Flex Saver 3mo, Balanced Green 6mo)
- Diverse suppliers represented: Green Energy Co, Power Plus, EcoFlow, Standard Electric, SolarStrong, Economy Power, FlexEnergy, TechPower Solutions, Community Power Co-op, Discount Power Direct, WindFlow Energy, Reliable Energy Corp

**Usage Scenarios Created:** 5 scenarios
- Average Household: 10,800 kWh/year (residential, balanced usage)
- High Summer Usage: 14,400 kWh/year (seasonal-high, AC-heavy)
- Low Usage Efficient: 6,000 kWh/year (residential, efficient)
- Small Business: 26,000 kWh/year (small-business, consistent)
- Winter-Heavy Usage: 13,200 kWh/year (seasonal-low, heating-driven)

**Data Validation Approach:**
- Type guards for runtime validation of individual objects
- Catalog validators that check entire arrays and throw descriptive errors
- Validation includes: type checking, numeric range validation, required field verification, ID uniqueness, calculation accuracy
- Optional Zod schemas not implemented (type guards sufficient for MVP)

**Implementation Decisions:**
- Used `as const` for immutability instead of Object.freeze() for better TypeScript inference
- Used `readonly` array types for catalog exports
- Included both default and named exports for flexibility
- Added comprehensive JSDoc comments for developer experience
- Created detailed README.md with usage examples and extension instructions
- Structured validation to be both strict and informative (descriptive error messages)

### Expected Outcome

A complete, type-safe mock data module with:
- Strongly typed TypeScript interfaces
- 10+ realistic supplier plans with diverse attributes
- 5+ usage profile scenarios with realistic 12-month patterns
- Validation layer for runtime type checking
- Immutable data structure to prevent accidental mutations
- Clean barrel exports for easy importing
- `/api/mock-data` endpoint for pipeline testing
- Zero TypeScript compilation errors
- Production-ready build output

---

**Created:** 2025-11-10
**Status:** Ready for Review
**Priority:** P0 - Critical
**Estimated Effort:** 3-4 hours (data entry and validation)
**Agent Model Used:** claude-sonnet-4-5-20250929

---

## Epic Reference

This story is part of **Epic 1: Project Setup & Infrastructure**

**Story Chain:**
1. **1.1** - Project Scaffold & Toolchain Setup (DONE)
2. **1.2** - shadcn/ui Component Library Setup (DONE)
3. **1.3** - Worker Mock Data Module Structure (THIS STORY - Ready for Development)
4. **1.4** - Worker Entry Point & Static Asset Serving (Pending)
5. **1.5** - Development & Deployment Scripts (Pending)

---

## Acceptance Criteria Summary

**Total Checkpoints:** 46 core + 20 optional (detailed validation)

### Critical Path (Minimum Viable)
- TypeScript types and interfaces defined
- Supplier catalog with 10+ plans created
- Usage scenarios with 5+ profiles created
- Validation functions implemented
- Data marked as immutable
- TypeScript compilation passes
- Build succeeds
- `/api/mock-data` endpoint returns data
- Documentation created
- Ready for next story

### Quality Assurance Path (Full Verification)
- All fields verified for realism
- Data calculations spot-checked
- Import/export patterns tested
- Edge cases considered
- Accessibility of data patterns
- Performance of data loading

